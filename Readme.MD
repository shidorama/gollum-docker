# About
 This is complete All-In-One package for setting-up gollum on dedicated server with nginx as reverse proxy and letsencrypt as automatic ssl solution

```Note: Yes, I know that docker philosophy expects me to create 2 separate containers for nginx and for gollum, but in this case I find it redundant```
 
# Preparation
 1. Get dedicated A name on your dns and assign it to servers IP
 1. Open ports 80 and 443 on a servers firewall and check them 
 
# Installation

1. generate ssh keys
1. add generated ssh key to wiki bitbucket repository
1. add oauth to bitbucket account and give it read permissions on everything
1. set config options in config.env
1. create docker volumes
    1. ``docker volume create --name=gollum-ssh``
    1. ``docker volume create --name=gollum-ssl``
1. (Optional) generate ssh keys and put them inside ``gollum-ssh``. They should be named id_rsa and id_rsa.pub respectively for private and public key. Add them to bitbucket repo,
1. build docker image 
    1. ``docker build -t gollum-wiki .``
1. run docker, publish ports 80 and 443 
    1. ``docker run -i -t --entrypoint bash -p 80:80 -p 443:443 -v gollum-ssh:/wiki/certs -v gollum-ssl:/etc/letsencrypt  --env-file config.env``
1. If you haven't build keys beforehand - they'll be generated by container. 
    1. Navigate to ``golum-ssh`` volume, 
    1. get public key and add it to bitbucket account
    1. remove ``lock`` file